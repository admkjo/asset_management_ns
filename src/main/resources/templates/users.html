<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<title>NS Asset Management - All Users</title>
<head th:include="fragments/body :: head (~{::title})">
<body class="fixed-left">

	<!-- Begin page -->
	<div id="wrapper">

		<!-- Topbar -->
		<div th:include="fragments/body :: topbar (~{::title})"></div>

		<!-- Left Sidebar -->
		<div th:include="fragments/body :: sidebar (~{::title})"></div>


		<!-- ============================================================== -->
		<!-- Start right Content here -->
		<!-- ============================================================== -->
		<div class="content-page">
			<!-- Start content -->
			<div class="content">
				<div class="container">

					<!-- Page-Title -->
					<div class="row">
						<div class="col-sm-12">
							<ol class="breadcrumb pull-right">
								<li><a href="#">Administration</a></li>
								<li class="active">Users</li>
							</ol>
						</div>
					</div>
					<div th:if="${flash != null}" 
					th:classappend="${#strings.toLowerCase(flash.status)}" class="alert flash" >
                    <a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a>
                    <span th:text="${flash.message}"></span>
                    </div>
							<div class="panel">
                            <div class="panel-body">
                                <div class="row">
                                    <div class="col-sm-6">
                                        <div class="m-b-30">
                                
                                        </div>
                                    </div>
                                </div>
       <div class="modal fade" id="myModal2" tabindex="-1" role="dialog">
  <div class="modal-dialog modal-md" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" style="color: #07689F;">Assign User Role & Save</h4>
      </div>
      <br/>
          <form id="assignUserRoles" method="post">
            <div class="table-responsive">
				<table class="table table-borderless" style="border:none;">
							  <tr> 
		     	   <td><input type="text" class="form-control name" placeholder="First Name" id="firstName" name="FIRST_NAME"  readonly></td>
		     	   <td><input type="text" class="form-control name" placeholder="Surname" id="lastName" name="LAST_NAME" readonly><td>
		     	   </tr>
		     	   <tr> 
		     	   <td><input type="text" class="form-control" placeholder="Other Names" id="otherNames" name="OTHER_NAMES" readonly></td>
		     	   <td><input type="text" class="form-control" placeholder="Department" id="department" name="DEPARTMENT" readonly><td>
		     	   </tr>
		     	  <tr>
		     	   <td> 
		     	   <select class="form-control" id="group" name="ROLE_ID">
					<!-- <option th:each="role : ${roles}" th:value="${role.ROLE_ID}" th:text="${role.ROLE_NAME}"> </option> -->
					</select>
		         </td>
		     	  <td><input type="email" class="form-control" placeholder="Email" id="email" name="EMAIL" readonly><td>
		     	   </tr>
		     	   <tr >
		     	   <td></td>
		     	   </tr>
					         </table>	 
			        </div>
		                   <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal"><i class="fa fa-times" aria-hidden="true"></i> Close</button>
        <button type="submit" class="btn btn-primary"><i class="fa fa-save" aria-hidden="true"></i> Save</button>
                              </div>
                              </form>
                             </div>
    </div><!-- /.modal-content -->
      </div><!-- /.modal-dialog -->
                                    <div class="col-md-12 col-sm-12 col-xs-12 table-responsive">
									<table class="table table-bordered table-striped" id="datatable">
                                    <thead>
                                        <tr>
                                            <th>First Name</th>
                                            <th>Last Name</th>
                                            <th>Other Names</th>
                                            <th>Department</th>
                                            <th>Email</th>
                                            <th>Action</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr class="" th:each="user : ${userDetails}">
                                            <td class="test">Fred</td>
                                            <td >Boahen</td>
                                            <td></td>
                                            <td >Applications</td>
                                            <td >Software</td>
                                            <td class="actions">
                                            <a href="#" data-toggle="modal" data-target="#myModal2" class="on-default add-new-role"
                                            data-balloon="Assign role to user" data-balloon-pos="up"><i class="fa fa-plus-square"></i></a>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                                    </div>
									</div>
								</div>

				</div>
				<!-- container -->

			</div>
			<!-- content -->

			<div th:include="fragments/body :: footer (~{::title})"></div>
			
			<script th:inline="javascript">
			/*<![CDATA[*/
			$(document).ready(function(){
				
				$("#datatable").on('click','.add-new-role',function(e){
			        
					e.preventDefault();
					
					// get the current row
			         var currentRow=$(this).closest("tr"); 
			         
			         var firstname=currentRow.find("td:eq(0)").text(); // get current row 1st TD value
			         var lastname=currentRow.find("td:eq(1)").text(); 
			         var othername=currentRow.find("td:eq(2)").text(); 
			         var department=currentRow.find("td:eq(3)").text();
			         var email=currentRow.find("td:eq(4)").text();
			         
			         document.getElementById('firstName').value=firstname;
			         document.getElementById('lastName').value=lastname;
			         document.getElementById('otherNames').value=othername;
			         document.getElementById('department').value=department;
			         
			         //Strip the @nhia.gov.gh from the email
					if(email.indexOf("@nhia.gov.gh")>=0){
						email=email.replace("@nhia.gov.gh", "");
							$("#email").text(email);
						}
					
			         document.getElementById('email').value=email;
			    });
		    
		   });
			/*]]>*/
			</script>

		</div>
		
		
		<!-- ============================================================== -->
		<!-- End Right content here -->
		<!-- ============================================================== -->

	</div>
	<!-- END wrapper -->
		     		
</body>
</html>